<% provide(:title, '全てのユーザー') %>
<h1 class="display-5 text-center pb-5 mt-3">全てのユーザー</h1>
<div class="text-center"><%= will_paginate %></div>
<table class="table">
  <thead>
  <tr>
    <th scope="col">ID</th>
    <th scope="col">アイコン</th>
    <th scope="col">Eメール</th>
    <% if current_user.admin? %>
      <th scope="col">プロフィールリンク(削除)</th>
    <% else %>
      <th scope="col">プロフィールリンク</th>
    <% end %>
  </tr>
  </thead>
  <tbody>
  <% @users.each do |user| %>
    <tr>
      <th scope="row"><%= user.id %></th>
      <% if user.image? %>
        <td><%= image_tag user.image.url,class: "icon" %></td>
      <% else %>
        <td><%= image_tag 'default.jpeg', class: "icon" %></td>
      <% end %>
      <td><%= user.email %></td>
      <td><%= link_to user.name, user %><%= link_to "(削除)", user, method: :delete, data: { confirm: "このユーザーを削除してもよろしいですか？" } if current_user.admin? && !current_user?(user)  %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<div class="text-center"><%= will_paginate %></div>