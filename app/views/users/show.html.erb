<% provide(:title, @user.name) %>
<h1 class="display-5 text-center pb-5 mt-3">
<% if @user.image? %>
  <img src='<%= @user.image %>' class="icon"><span class="h2 ml-3 align-middle"><%= @user.name %></span><span class="small ml-4">さんの投稿一覧</span>
<% else %>
  <%= image_tag 'default.jpeg' %><span class="h2 ml-3 align-middle"><%= @user.name %></span><span class="small ml-4">さんの投稿一覧</span>
<% end %>
</h1>

<% if @user.released? || current_user?(@user) || current_user.admin? %>
  <% @microposts.each do |micropost| %>
    <div class="card mb-5">
      <div class="card-header">
        <% if @user.image? %>
          <img src='<%= @user.image %>' class="icon icon-small"><span class="h4 ml-3 align-middle text-muted"><%= @user.name %></span>
        <% else %>
          <%= image_tag 'default.jpeg', class: "icon-small" %><span class="h4 ml-3 pt-2 align-middle text-muted"><%= @user.name %></span>
        <% end %>
      </div>
        <% if micropost.picture? %>
        <img src='<%= micropost.picture %>' class="card-img-top img-full pull-right">
        <% end %>
        <div class="card-body">
          <h3 class="card-title"><%= micropost.title if micropost.title? %></h3>
          <p class="card-text mt-4 bg-muted"><%= micropost.content %></p>
        </div>
        <div class="card-footer text-right">
          <% if current_user?(micropost.user) || current_user.admin? %>
            <%= link_to "投稿を削除する", micropost, method: :delete, data: { confirm: "本当に削除してよろしいですか？" }, class: "btn btn-primary float-left" %>
          <% end %>
          <small class="text-muted "><%= time_ago_in_words(micropost.created_at) %>前</small>
        </div>
    </div>
  <% end %>
<% else %>
  <p class="text-center">このアカウントは非公開です</p>
<% end %>
<% if @microposts.empty? %>
  <p class="text-center">投稿はありません</p>
<% end %>

<div class="text-center"><%= will_paginate(@microposts) %></div>

